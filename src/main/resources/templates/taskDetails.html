<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="'Task | ' + ${task.title}">Task Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/css/sidebar.css" rel="stylesheet">
</head>
<body>

<!-- Navbar -->
<div th:replace="~{fragments/commonNavbar}"></div>

<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div th:replace="~{fragments/commonSidebar}"></div>

    <!-- Main Content -->
    <main class="col-lg-10 ms-auto p-4" style="background: #f0f2f5; min-height: 100vh;">
      <div class="container">
        <h2 class="text-primary fw-bold" th:text="${task.title}">Task Title</h2>

        <p><strong>Type:</strong> <span th:text="${task.taskType}"></span></p>
        <p><strong>Status:</strong> <span th:text="${task.status}"></span></p>
        <p><strong>Assignee:</strong> <span th:text="${task.assignee.firstName + ' ' + task.assignee.lastName}"></span></p>
        <p th:if="${task.parentTask != null}">
          <strong>Parent Task:</strong> <span th:text="${task.parentTask.title}"></span>
        </p>

        <!-- Button to create sub-task -->
        <div th:if="${task.taskType != 'SUB_TASK'}">
          <a th:href="@{/projects/{projectId}/tasks/createSubTask(parentId=${task.id},projectId=${projectId})}" 
             class="btn btn-primary mt-3">+ Create Sub-task</a>
        </div>

      </div>
    </main>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/sidebar.js"></script>
<script src="/js/authFetch.js"></script>

</body>
</html>
